<%= form_with model: [:admin, learning_moment], class: "space-y-6" do |f| %>
  <% if learning_moment.errors.any? %>
    <div class="bg-red-500/10 border border-red-500/20 rounded p-4">
      <ul class="list-disc list-inside text-red-400 text-sm">
        <% learning_moment.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= f.label :category_id, "Category", class: "block text-sm font-medium text-muted mb-1" %>
    <%= f.collection_select :category_id, categories, :id, :name,
        { prompt: "Select a category" },
        { class: "w-full bg-background border border-muted/20 rounded px-3 py-2 text-text focus:border-primary focus:outline-none" } %>
  </div>

  <div>
    <%= f.label :engagement_type, class: "block text-sm font-medium text-muted mb-1" %>
    <%= f.select :engagement_type,
        LearningMoment.engagement_types.keys.map { |t| [t.humanize, t] },
        { prompt: "Select engagement type" },
        { class: "w-full bg-background border border-muted/20 rounded px-3 py-2 text-text focus:border-primary focus:outline-none" } %>
    <p class="text-xs text-muted mt-1">
      Consumed (read/watched) | Experimented (tried once) | Applied (real use) | Shared (taught others)
    </p>
  </div>

  <div>
    <%= f.label :description, class: "block text-sm font-medium text-muted mb-1" %>
    <%= f.text_field :description, class: "w-full bg-background border border-muted/20 rounded px-3 py-2 text-text focus:border-primary focus:outline-none", placeholder: "e.g., Kent Beck's XP book" %>
  </div>

  <div>
    <%= f.label :url, "Link (optional)", class: "block text-sm font-medium text-muted mb-1" %>
    <%= f.url_field :url, class: "w-full bg-background border border-muted/20 rounded px-3 py-2 text-text focus:border-primary focus:outline-none", placeholder: "https://..." %>
  </div>

  <div>
    <%= f.label :occurred_at, "When did this happen?", class: "block text-sm font-medium text-muted mb-1" %>
    <%= f.date_field :occurred_at, class: "w-full bg-background border border-muted/20 rounded px-3 py-2 text-text focus:border-primary focus:outline-none" %>
  </div>

  <div class="flex gap-4">
    <%= f.submit class: "bg-primary text-white px-4 py-2 rounded hover:bg-primary/90 transition cursor-pointer" %>
    <%= link_to "Cancel", admin_dashboard_path, class: "text-muted hover:text-text transition" %>
  </div>
<% end %>
