<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
  <h1 class="text-3xl font-bold text-text mb-8">Dashboard</h1>

  <!-- Categories Section -->
  <div class="mb-12">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-semibold text-text">Learning Categories</h2>
      <%= link_to "New Category", new_admin_category_path, class: "bg-primary text-white px-4 py-2 rounded hover:bg-primary/90 transition" %>
    </div>

    <div class="bg-surface border border-muted/20 rounded-lg overflow-hidden">
      <table class="min-w-full divide-y divide-muted/20">
        <thead class="bg-muted/10">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Position</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Name</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Moments</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-muted/20">
          <% @categories.each do |category| %>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-muted"><%= category.position %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-text"><%= category.name %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-muted"><%= category.learning_moments.count %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm space-x-2">
                <%= link_to "Edit", edit_admin_category_path(category), class: "text-primary hover:text-primary/80" %>
                <%= button_to "Delete", admin_category_path(category), method: :delete, class: "text-red-400 hover:text-red-300", form: { data: { turbo_confirm: "Are you sure?" } } %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Learning Moments Section -->
  <div class="mb-12">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-semibold text-text">Learning Moments</h2>
      <%= link_to "New Moment", new_admin_learning_moment_path, class: "bg-primary text-white px-4 py-2 rounded hover:bg-primary/90 transition" %>
    </div>

    <div class="bg-surface border border-muted/20 rounded-lg overflow-hidden">
      <table class="min-w-full divide-y divide-muted/20">
        <thead class="bg-muted/10">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Category</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Type</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Description</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Date</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-muted/20">
          <% @categories.each do |category| %>
            <% category.learning_moments.chronological.each do |moment| %>
              <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-muted"><%= category.name %></td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-muted">
                  <%= case moment.engagement_type
                      when 'consumed' then 'ðŸ“–'
                      when 'experimented' then 'ðŸ§ª'
                      when 'applied' then 'ðŸ”¨'
                      when 'shared' then 'ðŸ“£'
                      end %>
                  <%= moment.engagement_type.humanize %>
                </td>
                <td class="px-6 py-4 text-sm text-text max-w-xs truncate"><%= moment.description %></td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-muted"><%= moment.occurred_at.strftime("%b %Y") %></td>
                <td class="px-6 py-4 whitespace-nowrap text-sm space-x-2">
                  <%= link_to "Edit", edit_admin_learning_moment_path(moment), class: "text-primary hover:text-primary/80" %>
                  <%= button_to "Delete", admin_learning_moment_path(moment), method: :delete, class: "text-red-400 hover:text-red-300", form: { data: { turbo_confirm: "Are you sure?" } } %>
                </td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Podcast Episodes Section -->
  <div>
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-semibold text-text">Podcast Episodes</h2>
      <%= link_to "New Episode", new_admin_podcast_episode_path, class: "bg-primary text-white px-4 py-2 rounded hover:bg-primary/90 transition" %>
    </div>

    <div class="bg-surface border border-muted/20 rounded-lg overflow-hidden">
      <table class="min-w-full divide-y divide-muted/20">
        <thead class="bg-muted/10">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">#</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Title</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Published</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-muted uppercase tracking-wider">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-muted/20">
          <% @podcast_episodes.each do |episode| %>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-muted"><%= episode.episode_number %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-text"><%= episode.title %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-muted"><%= episode.published_at&.strftime("%b %d, %Y") %></td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                <%= link_to "Edit", edit_admin_podcast_episode_path(episode), class: "text-primary hover:text-primary/80" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
