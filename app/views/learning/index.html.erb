<div class="py-16">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mb-12">
    <h1 class="text-3xl font-bold mb-2">How I Learn</h1>
    <p class="text-muted">
      Kent Beck's <a href="https://tidyfirst.substack.com/p/paint-drip-people" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">paint drip people</a> stuck with me as soon as I read it. I realized quite fast this is how I learn too.
    </p>
  </div>

  <% if @categories.any? %>
    <div data-controller="paint-drip" data-action="click@window->paint-drip#closeOnClickOutside">
      <!-- Expanded moments panels - above canvas -->
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mb-4">
        <div class="drips-details">
          <% @categories.each do |category| %>
            <div data-drip-id="<%= category.id %>" class="drip-detail-container">
              <div data-paint-drip-target="moments" class="hidden">
                <h3 class="font-semibold text-text mb-3"><%= category.name %></h3>
                <div class="flex flex-wrap gap-2">
                  <% category.learning_moments.chronological.each do |moment| %>
                    <%= render "learning/droplet", moment: moment %>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>

      <%= render "learning/canvas", categories: @categories, max_depth: @max_depth %>
    </div>
  <% else %>
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <p class="text-muted">No learning categories yet.</p>
    </div>
  <% end %>
</div>
