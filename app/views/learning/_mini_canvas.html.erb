<%= link_to learning_portfolio_path, class: "block hover:opacity-90 transition" do %>
  <svg class="w-full" viewBox="0 0 400 120" preserveAspectRatio="xMidYMin meet">
    <defs>
      <!-- Glossy slime gradient - bright slime green -->
      <linearGradient id="mini-slime-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color: #22C55E; stop-opacity: 1;" />
        <stop offset="40%" style="stop-color: #22C55E; stop-opacity: 1;" />
        <stop offset="100%" style="stop-color: #16A34A; stop-opacity: 0.9;" />
      </linearGradient>

      <!-- Highlight for glossy effect -->
      <linearGradient id="mini-slime-highlight" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color: white; stop-opacity: 0.35;" />
        <stop offset="40%" style="stop-color: white; stop-opacity: 0.1;" />
        <stop offset="100%" style="stop-color: white; stop-opacity: 0;" />
      </linearGradient>

      <filter id="mini-shadow" x="-10%" y="-10%" width="120%" height="130%">
        <feDropShadow dx="1" dy="2" stdDeviation="1" flood-opacity="0.2"/>
      </filter>
    </defs>

    <g filter="url(#mini-shadow)">
      <!-- Top goo band - blobby bottom edge -->
      <path d="M 0,8
               L 360,8
               Q 380,8 390,14
               Q 396,20 394,28
               Q 380,27 350,30
               Q 280,28 200,32
               Q 120,29 60,33
               Q 20,31 0,30
               Z"
            fill="url(#mini-slime-gradient)"/>

      <!-- Highlight on top band -->
      <path d="M 4,10
               L 340,10
               Q 360,10 370,13
               Q 350,12 280,14
               Q 140,12 4,16
               Z"
            fill="url(#mini-slime-highlight)"/>

      <!-- Slime drips -->
      <% categories.each_with_index do |category, index| %>
        <%
          x_pos = ((index + 1) * (400.0 / (categories.count + 1))).to_i
          depth_percentage = max_depth > 0 ? (category.drip_depth / max_depth * 100) : 0
          drip_length = 35 + (depth_percentage / 100.0 * 30)

          # Scaled down slime dimensions
          pool_w = 20 + (index % 2) * 4
          stretch_w = 5 + (index % 3)
          blob_r = 7 + (index % 2) * 2

          y_pool = 28 + (index % 3) * 2
          y_stretch_start = y_pool + 12
          y_blob = y_pool + drip_length

          x_wobble = (index % 3 - 1) * 3
          x = x_pos + x_wobble
        %>

        <!-- Slime drip: pool → stretchy neck → blob -->
        <path d="M <%= x - pool_w/2 %>,<%= y_pool - 4 %>
                 Q <%= x - pool_w/2 - 2 %>,<%= y_pool + 4 %>
                   <%= x - stretch_w/2 - 2 %>,<%= y_stretch_start %>
                 Q <%= x - stretch_w/2 - 1 %>,<%= y_blob - blob_r - 8 %>
                   <%= x - stretch_w/2 %>,<%= y_blob - blob_r %>
                 Q <%= x - stretch_w/2 - 1 %>,<%= y_blob - blob_r/2 %>
                   <%= x - blob_r %>,<%= y_blob %>
                 Q <%= x - blob_r - 2 %>,<%= y_blob + blob_r * 0.8 %>
                   <%= x %>,<%= y_blob + blob_r %>
                 Q <%= x + blob_r + 2 %>,<%= y_blob + blob_r * 0.8 %>
                   <%= x + blob_r %>,<%= y_blob %>
                 Q <%= x + stretch_w/2 + 1 %>,<%= y_blob - blob_r/2 %>
                   <%= x + stretch_w/2 %>,<%= y_blob - blob_r %>
                 Q <%= x + stretch_w/2 + 1 %>,<%= y_blob - blob_r - 8 %>
                   <%= x + stretch_w/2 + 2 %>,<%= y_stretch_start %>
                 Q <%= x + pool_w/2 + 2 %>,<%= y_pool + 4 %>
                   <%= x + pool_w/2 %>,<%= y_pool - 4 %>
                 Z"
              fill="url(#mini-slime-gradient)"/>

        <!-- Blob highlight -->
        <ellipse cx="<%= x - blob_r/3 %>" cy="<%= y_blob - blob_r/4 %>"
                 rx="<%= blob_r/4 %>" ry="<%= blob_r/5 %>"
                 fill="white" opacity="0.2"/>
      <% end %>
    </g>

    <!-- Category names -->
    <% categories.each_with_index do |category, index| %>
      <%
        x_pos = ((index + 1) * (400.0 / (categories.count + 1))).to_i
        depth_percentage = max_depth > 0 ? (category.drip_depth / max_depth * 100) : 0
        drip_length = 35 + (depth_percentage / 100.0 * 30)
        blob_r = 7 + (index % 2) * 2
        y_blob = 28 + (index % 3) * 2 + drip_length
      %>
      <text x="<%= x_pos %>" y="<%= y_blob + blob_r + 12 %>"
            text-anchor="middle"
            class="fill-current text-muted"
            style="font-size: 9px; font-weight: 500;">
        <%= truncate(category.name, length: 12) %>
      </text>
    <% end %>
  </svg>
<% end %>
